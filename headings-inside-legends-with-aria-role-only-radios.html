<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />

    <title>Example demonstrating headings inside legends with additional aria roles</title>

    <link href="css/nhsuk-5.2.0.min.css" rel="stylesheet" />

    <script src="js/nhsuk-5.2.0.min.js" defer></script>

    <link rel="shortcut icon" href="assets/favicons/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="assets/favicons/apple-touch-icon-180x180.png" />
    <link rel="mask-icon" href="assets/favicon.svg" color="#005eb8" />
    <link rel="icon" sizes="192x192" href="assets/favicon-192x192.png" />
    <meta name="msapplication-TileImage" content="assets/mediumtile-144x144.png" />
    <meta name="msapplication-TileColor" content="#005eb8" />
    <meta name="msapplication-square70x70logo" content="assets/smalltile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="assets/mediumtile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="assets/favicons/widetile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="assets/favicons/largetile-310x310.png" />
  </head>

  <body>
    <script>
      document.body.className = document.body.className ? document.body.className + " js-enabled" : "js-enabled";
    </script>

    <header class="nhsuk-header nhsuk-header--transactional" role="banner">
      <div class="nhsuk-width-container nhsuk-header__container">
        <div style="height: 40px"></div>
      </div>
    </header>

    <div class="nhsuk-width-container app-width-container">
      <main class="nhsuk-main-wrapper app-main-wrapper" id="maincontent" role="main">
        <div class="nhsuk-inset-text">
          <span class="nhsuk-u-visually-hidden">Information: </span>
          <p>Additional aria added to legend to work around JAWS bug.</p>
          <p>Original &lt;h1&gt; removed - relying only on aria role on legend.</p>
          <p><code>&lt;legend role="heading" aria-level="1"&gt;&lt;span&gt;...&lt;/span&gt;&lt;/legend&gt;</code></p>
          <p>Pressing <code>H</code> in this example should list headings in JAWS.</p>
          <p>
            See
            <a href="https://github.com/FreedomScientific/VFO-standards-support/issues/549"
              >https://github.com/FreedomScientific/VFO-standards-support/issues/549</a
            >.
          </p>
        </div>

        <div class="nhsuk-form-group">
          <fieldset class="nhsuk-fieldset">
            <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--l" role="heading" aria-level="1">
              <span class="nhsuk-fieldset__heading">Are you 18 or over?</span>
            </legend>

            <div class="nhsuk-radios">
              <div class="nhsuk-radios__item">
                <input class="nhsuk-radios__input" id="example-1" name="example" type="radio" value="yes" />
                <label class="nhsuk-label nhsuk-radios__label" for="example-1"> Yes </label>
              </div>

              <div class="nhsuk-radios__item">
                <input class="nhsuk-radios__input" id="example-2" name="example" type="radio" value="no" />
                <label class="nhsuk-label nhsuk-radios__label" for="example-2"> No </label>
              </div>
            </div>
          </fieldset>
        </div>

        <hr />

        <table>
          <caption>
            Results
          </caption>
          <thead>
            <tr>
              <th>Operating System</th>
              <th>Browser</th>
              <th>Assistive tech</th>
              <th>Notes</th>
              <th>Pass/fail</th>
            </tr>
          </thead>
          <tr>
            <td>Windows 10</td>
            <td>Chrome 94</td>
            <td>JAWS 2021</td>
            <td>
              Works as expected. Pressing INS+F5 to show all form fields demonstrates that JAWS is still maintaining the
              association between form fields and legends despite the `role="heading"`
            </td>
            <td>✅</td>
          </tr>
          <tr>
            <td>Windows 10</td>
            <td>Chrome 94</td>
            <td>NVDA 2021.1</td>
            <td>
              <p>
                Pressing <code>F</code> to move to the radio buttons should announce "Are you 18 or over", before
                announcing the radios. Which it does.
              </p>
              <p style="background-color: yellow">
                If you press <code>H</code> to announce the main heading, and then <code>F</code> to move to the form
                field, it does not re-announce the legend. Is this ok? Assuming the h1 is worded like a question, people
                should make the connection between it and the subsequent yes/no questions?
              </p>
            </td>
            <td>✅</td>
          </tr>
          <tr>
            <td>Windows 10</td>
            <td>Firefox</td>
            <td>NVDA 2021.1</td>
            <td></td>
            <td>✅</td>
          </tr>
          <tr>
            <td>Windows 10</td>
            <td>IE11</td>
            <td>NVDA 2021.1</td>
            <td>
              Pressing <code>F</code> does not announce the legend first as it has in other browsers, but it does not do
              this in the reference example either so this is an existing deficiency of this browser.
            </td>
            <td>✅</td>
          </tr>
          <tr>
            <td>Windows 10</td>
            <td>Edge</td>
            <td>NVDA 2021.1</td>
            <td></td>
            <td>✅</td>
          </tr>
          <tr>
            <td>Android 10</td>
            <td>Chrome 94</td>
            <td>TalkBack</td>
            <td></td>
            <td>✅</td>
          </tr>
          <tr>
            <td>iOS</td>
            <td>Chrome 94</td>
            <td>Voiceover</td>
            <td></td>
            <td></td>
          </tr>
        </table>

        <p>
          Example markup lifted from
          <a href="https://service-manual.nhs.uk/design-system/components/fieldset"
            >https://service-manual.nhs.uk/design-system/components/fieldset</a
          >
        </p>
      </main>
    </div>

    <footer role="contentinfo">
      <div class="nhsuk-footer" id="nhsuk-footer">
        <div class="nhsuk-width-container"></div>
      </div>
    </footer>
  </body>
</html>
